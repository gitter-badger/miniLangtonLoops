<canvas id=c width=200 height=200>

<script>
x = c.getContext("2d");

// map
m = [];

// Initial state
s = [
  "022222222",
  "2170140142",
  "2022222202",
  "2720000212",
  "2120000212",
  "2020000212",
  "2720000212",
  "21222222122222",
  "207107107111112",
  "02222222222222"
];

// Debug
z = 45; // 0


// Initial map (100x100)
for(j = 0; j < 100; j++){
  m[j] = [];
  for(i = 0; i < 100; i++){
    m[j][i] = s[j-z] && s[j-z][i-z] ? +s[j-z][i-z] : 0;
  }
}

// Official rules
// format: center, top, right, bottom, left => new center

/*
r = [
  "000000",
  "000012",
  "000020",
  "000030",
  "000050",
  "000063",
  "000071",
  "000112",
  "000122",
  "000132",
  "000212",
  "000220",
  "000230",
  "000262",
  "000272",
  "000320",
  "000525",
  "000622",
  "000722",
  "001022",
  "001120",
  "002020",
  "002030",
  "002050",
  "002125",
  "002220",
  "002322",
  "005222",
  "012321",
  "012421",
  "012525",
  "012621",
  "012721",
  "012751",
  "014221",
  "014321",
  "014421",
  "014721",
  "016251",
  "017221",
  "017255",
  "017521",
  "017621",
  "017721",
  "025271",
  "100011",
  "100061",
  "100077",
  "100111",
  "100121",
  "100211",
  "100244",
  "100277",
  "100511",
  "101011",
  "101111",
  "101244",
  "101277",
  "102026",
  "102121",
  "102211",
  "102244",
  "102263",
  "102277",
  "102327",
  "102424",
  "102626",
  "102644",
  "102677",
  "102710",
  "102727",
  "105427",
  "111121",
  "111221",
  "111244",
  "111251",
  "111261",
  "111277",
  "111522",
  "112121",
  "112221",
  "112244",
  "112251",
  "112277",
  "112321",
  "112424",
  "112621",
  "112727",
  "113221",
  "122244",
  "122277",
  "122434",
  "122547",
  "123244",
  "123277",
  "124255",
  "124267",
  "125275",
  "200012",
  "200022",
  "200042",
  "200071",
  "200122",
  "200152",
  "200212",
  "200222",
  "200232",
  "200242",
  "200250",
  "200262",
  "200272",
  "200326",
  "200423",
  "200517",
  "200522",
  "200575",
  "200722",
  "201022",
  "201122",
  "201222",
  "201422",
  "201722",
  "202022",
  "202032",
  "202052",
  "202073",
  "202122",
  "202152",
  "202212",
  "202222",
  "202272",
  "202321",
  "202422",
  "202452",
  "202520",
  "202552",
  "202622",
  "202722",
  "203122",
  "203216",
  "203226",
  "203422",
  "204222",
  "205122",
  "205212",
  "205222",
  "205521",
  "205725",
  "206222",
  "206722",
  "207122",
  "207222",
  "207422",
  "207722",
  "211222",
  "211261",
  "212222",
  "212242",
  "212262",
  "212272",
  "214222",
  "215222",
  "216222",
  "217222",
  "222272",
  "222442",
  "222462",
  "222762",
  "222772",
  "300013",
  "300022",
  "300041",
  "300076",
  "300123",
  "300421",
  "300622",
  "301021",
  "301220",
  "302511",
  "401120",
  "401220",
  "401250",
  "402120",
  "402221",
  "402326",
  "402520",
  "403221",
  "500022",
  "500215",
  "500225",
  "500232",
  "500272",
  "500520",
  "502022",
  "502122",
  "502152",
  "502220",
  "502244",
  "502722",
  "512122",
  "512220",
  "512422",
  "512722",
  "600011",
  "600021",
  "602120",
  "612125",
  "612131",
  "612225",
  "700077",
  "701120",
  "701220",
  "701250",
  "702120",
  "702221",
  "702251",
  "702321",
  "702525",
  "702720"
];
*/

// Golfed rules
// Ignore all the rules that don't change the current color
r = [
  "000012",
  "000063",
  "000071",
  "000112",
  "000122",
  "000132",
  "000212",
  "000262",
  "000272",
  "000525",
  "000622",
  "000722",
  "001022",
  "002125",
  "002322",
  "005222",
  "012321",
  "012421",
  "012525",
  "012621",
  "012721",
  "012751",
  "014221",
  "014321",
  "014421",
  "014721",
  "016251",
  "017221",
  "017255",
  "017521",
  "017621",
  "017721",
  "025271",
  "100077",
  "100244",
  "100277",
  "101244",
  "101277",
  "102026",
  "102244",
  "102263",
  "102277",
  "102327",
  "102424",
  "102626",
  "102644",
  "102677",
  "102710",
  "102727",
  "105427",
  "111244",
  "111277",
  "111522",
  "112244",
  "112277",
  "112424",
  "112727",
  "122244",
  "122277",
  "122434",
  "122547",
  "123244",
  "123277",
  "124255",
  "124267",
  "125275",
  "200071",
  "200250",
  "200326",
  "200423",
  "200517",
  "200575",
  "202073",
  "202321",
  "202520",
  "203216",
  "203226",
  "205521",
  "205725",
  "211261",
  "300022",
  "300041",
  "300076",
  "300421",
  "300622",
  "301021",
  "301220",
  "302511",
  "401120",
  "401220",
  "401250",
  "402120",
  "402221",
  "402326",
  "402520",
  "403221",
  "500022",
  "500232",
  "500272",
  "500520",
  "502022",
  "502122",
  "502152",
  "502220",
  "502244",
  "502722",
  "512122",
  "512220",
  "512422",
  "512722",
  "600011",
  "600021",
  "602120",
  "612125",
  "612131",
  "612225",
  "701120",
  "701220",
  "701250",
  "702120",
  "702221",
  "702251",
  "702321",
  "702525",
  "702720"
];

// Next generation
g = function(){

  // New map
  n = [];
  
  // for each line
  for(j = 0; j < 100; j++){
  
    n[j] = [];

    // For each cell
    for(i = 0; i < 100; i++){
    
      // Reuse last color by default
      n[j][i] = m[j][i];
      
      // For each rule
      for(k = 0; k < r.length; k++){
        
        // Test the cell and its neighbourhood at previous generation, in the 4 possible rotations
        if(+r[k][0] == m[j][i]){
        
          north = m[j-1] ? m[j-1][i] : 0;
          east = m[j][i+1] ? m[j][i+1] : 0;
          south = m[j+1] ? m[j+1][i] : 0;
          west = m[j][i-1] ? m[j][i-1] : 0;
          
          r1 = +r[k][1];
          r2 = +r[k][2];
          r3 = +r[k][3];
          r4 = +r[k][4];
          
          if(
              (r1 == north && r2 == east && r3 == south && r4 == west)
            ||(r1 == east && r2 == south && r3 == west && r4 == north)
            ||(r1 == south && r2 == west && r3 == north && r4 == east)
            ||(r1 == west && r2 == north && r3 == east && r4 == south)
          ){
            n[j][i] = +r[k][5];
          }
        }
      }
    }
  }
  
  m = n;
  
};

// Draw
d = function(){
  for(j = 0; j < 100; j++){
    for(i = 0; i < 100; i++){
      x.fillStyle = ["black", "#0000FF", "red", "#01FF00", "yellow", "#FF00FF", "white", "#01FFFF"][m[j][i]];
      x.fillRect(i*2, j*2, 2, 2);
    }
  }
};

// Loop
d();

loop = function(){
  g();
  d();
  requestAnimationFrame(loop);
}

loop();

</script>